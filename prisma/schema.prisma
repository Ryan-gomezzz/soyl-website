generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum ApplicantStatus {
  NEW
  SCREENING
  INTERVIEW
  REJECTED
  HIRED
}

model Applicant {
  id                String          @id @default(uuid())
  fullName          String
  email             String
  phone             String?
  location          String?
  roleApplied       String
  seniority         String
  linkedin          String
  github            String?
  resumeUrl         String
  coverLetter       String?
  workEligibility   String
  noticePeriod      String?
  salaryExpectation String?
  source            String?
  consent           Boolean
  keywordScore      Float?
  status            ApplicantStatus @default(NEW)
  assignedTo        String?
  adminNotes        String?
  createdAt         DateTime        @default(now())
  updatedAt         DateTime        @updatedAt

  @@index([roleApplied, status])
  @@index([email])
}

model PageVisit {
  id        String   @id @default(uuid())
  path      String
  userAgent String?
  ip        String?  // Optional, hash it for privacy
  createdAt DateTime @default(now())

  @@index([path])
  @@index([createdAt])
}

model PilotRequest {
  id          String   @id @default(uuid())
  name        String
  email       String
  company     String
  phone       String?
  needs       String?
  status      String   @default("NEW") // NEW, CONTACTED, SCHEDULED
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model Inquiry {
  id          String   @id @default(uuid())
  name        String
  email       String
  message     String
  type        String   @default("GENERAL") // GENERAL, SALES, SUPPORT
  status      String   @default("NEW")
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

